<ion-header [translucent]="true">
  <ion-toolbar color="warning">
    <ion-title class="titulo-principal">Pedidos Entrantes</ion-title>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content id="main-content" [fullscreen]="true">
  <!-- Contenedor de las dos secciones (izquierda y derecha) -->
  <div class="pedidos-container">
    <!-- Sección "En proceso" (Izquierda) -->
    <div class="pedidos-seccion">
      <ion-card>
        <ion-card-header>
          <ion-card-title>En proceso</ion-card-title>
        </ion-card-header>
      </ion-card>

      <ng-container *ngFor="let pedido of pedidosEnProceso">
        <ion-card *ngIf="!pedido.rechazado" class="pedido-card">
          <ion-item lines="none">
            <ion-icon name="checkmark-circle" color="success" slot="start"></ion-icon>
            <ion-label>
              <h2>Pedido #{{pedido.id}}</h2>
              <p>{{pedido.estado}}</p>
              <ion-note>Hace {{pedido.tiempo}} minutos</ion-note>
            </ion-label>
            <ion-text color="primary" slot="end">{{pedido.precio | currency}}</ion-text>
          </ion-item>

          <ion-list>
            <ng-container *ngFor="let producto of pedido.productos">
              <ion-item>
                <ion-avatar slot="start">
                  <img [src]="producto.imagen" />
                </ion-avatar>
                <ion-label>
                  <h3>{{producto.nombre}}</h3>
                  <p>{{producto.notas}}</p>
                </ion-label>
                <ion-text slot="end">{{producto.precio | currency}}</ion-text>
              </ion-item>
            </ng-container>
          </ion-list>

          <!-- Sección del método de pago -->
          <ion-item>
            <ion-icon name="card" slot="start" color="primary"></ion-icon>
            <ion-label class="metodo-pago-label">Método de Pago</ion-label>
            <ion-text>{{ pedido.selectedPaymentMethod || 'No especificado' }}</ion-text>
          </ion-item>

          <ion-item>
            <ion-row class="ion-justify-content-around ion-padding-top">
              <ion-button color="success" expand="block" (click)="aceptarPedido(pedido)">Aceptar</ion-button>
              <ion-button color="danger" expand="block" (click)="rechazarPedido(pedido)">Rechazar</ion-button>
            </ion-row>
          </ion-item>
        </ion-card>
      </ng-container>
    </div>

    <!-- Sección "Completadas" (Derecha) -->
    <div class="pedidos-seccion">
      <ion-card>
        <ion-card-header>
          <ion-card-title>Completadas</ion-card-title>
        </ion-card-header>
      </ion-card>

      <ng-container *ngFor="let pedido of pedidosCompletados">
        <ion-card class="pedido-card">
          <ion-item lines="none">
            <ion-icon name="checkmark-circle" color="success" slot="start"></ion-icon>
            <ion-label>
              <h2>Pedido #{{pedido.id}}</h2>
              <p>{{pedido.estado}}</p>
              <ion-note>Hace {{pedido.tiempo}} minutos</ion-note>
            </ion-label>
            <ion-text color="primary" slot="end">{{pedido.precio | currency}}</ion-text>
          </ion-item>

          <ion-list>
            <ng-container *ngFor="let producto of pedido.productos">
              <ion-item>
                <ion-avatar slot="start">
                  <img [src]="producto.imagen" />
                </ion-avatar>
                <ion-label>
                  <h3>{{producto.nombre}}</h3>
                  <p>{{producto.notas}}</p>
                </ion-label>
                <ion-text slot="end">{{producto.precio | currency}}</ion-text>
              </ion-item>
            </ng-container>
          </ion-list>
        </ion-card>
      </ng-container>
    </div>
  </div>

  <!-- Notificación -->
  <div *ngIf="mostrarNotificacion" class="notificacion" [ngClass]="tipo">
    <p>{{ mensaje }}</p>
    <ion-button (click)="cerrarNotificacion()" fill="clear">Cerrar</ion-button>
  </div>
</ion-content>

